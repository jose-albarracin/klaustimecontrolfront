import{K as Vt,S as xt,i as St,s as Bt,T as W,U as J,e as _,w as V,k as x,t as wt,c as g,a as v,x as S,d as c,m as B,h as yt,b as d,g as Ot,M as i,y as O,I as At,V as Ft,W as P,q as A,o as F,B as M,v as Mt}from"../../../chunks/index-19f775f8.js";import{a as Et,u as Ut}from"../../../chunks/login-868b565c.js";import{I as Q}from"../../../chunks/inputs-cc0c41a8.js";import{I as kt}from"../../../chunks/inline-svg-44d6d57a.js";import{u as Ct}from"../../../chunks/tasks-dc514f39.js";import{f as Rt}from"../../../chunks/teams-7b63fc38.js";import"../../../chunks/index-3cd74ee4.js";function zt(e){let o,s,l,a,w,h,u,y,$,r,D,b,H,K,n,f,Y,Z,U,E,tt,et,C,k,st,nt,R,I,at,rt,z,T,j,it,X,lt,ut;a=new kt({props:{class:"w-[20px] h-[20px]",src:"/icons/arrow-left-solid.svg"}});function It(t){e[5](t)}let pt={class:"mb-4",label:"Title",name:"title",type:"text",required:!0};e[1].title!==void 0&&(pt.value=e[1].title),b=new Q({props:pt}),W.push(()=>J(b,"value",It));function Dt(t){e[6](t)}let dt={class:"mb-4",label:"Description",name:"description",textarea:!0,rows:"6",required:!0};e[1].description!==void 0&&(dt.value=e[1].description),f=new Q({props:dt}),W.push(()=>J(f,"value",Dt));function Tt(t){e[7](t)}let ct={class:"mb-4",label:"Team",select:!0,multiselect:null,options:e[3]};e[2]!==void 0&&(ct.selected=e[2]),E=new Q({props:ct}),W.push(()=>J(E,"selected",Tt));function jt(t){e[8](t)}let ft={class:"mb-4",label:"Start",name:"start",type:"date",required:!0};e[1].start!==void 0&&(ft.value=e[1].start),k=new Q({props:ft}),W.push(()=>J(k,"value",jt));function qt(t){e[9](t)}let mt={label:"End",name:"end",type:"date",required:!0};return e[1].end!==void 0&&(mt.value=e[1].end),I=new Q({props:mt}),W.push(()=>J(I,"value",qt)),j=new kt({props:{class:"text-white w-[15px] h-fit mr-3",src:"/icons/floppy-disk-solid.svg"}}),{c(){o=_("div"),s=_("div"),l=_("a"),V(a.$$.fragment),w=x(),h=_("h1"),u=wt("Edit task"),y=x(),$=_("div"),r=_("form"),D=_("div"),V(b.$$.fragment),K=x(),n=_("div"),V(f.$$.fragment),Z=x(),U=_("div"),V(E.$$.fragment),et=x(),C=_("div"),V(k.$$.fragment),nt=x(),R=_("div"),V(I.$$.fragment),rt=x(),z=_("div"),T=_("button"),V(j.$$.fragment),it=wt("Save"),this.h()},l(t){o=g(t,"DIV",{class:!0});var m=v(o);s=g(m,"DIV",{class:!0});var q=v(s);l=g(q,"A",{href:!0,class:!0});var L=v(l);S(a.$$.fragment,L),L.forEach(c),w=B(q),h=g(q,"H1",{class:!0});var G=v(h);u=yt(G,"Edit task"),G.forEach(c),q.forEach(c),y=B(m),$=g(m,"DIV",{class:!0});var N=v($);r=g(N,"FORM",{class:!0});var p=v(r);D=g(p,"DIV",{class:!0});var _t=v(D);S(b.$$.fragment,_t),_t.forEach(c),K=B(p),n=g(p,"DIV",{class:!0});var gt=v(n);S(f.$$.fragment,gt),gt.forEach(c),Z=B(p),U=g(p,"DIV",{class:!0});var vt=v(U);S(E.$$.fragment,vt),vt.forEach(c),et=B(p),C=g(p,"DIV",{class:!0});var ht=v(C);S(k.$$.fragment,ht),ht.forEach(c),nt=B(p),R=g(p,"DIV",{class:!0});var bt=v(R);S(I.$$.fragment,bt),bt.forEach(c),rt=B(p),z=g(p,"DIV",{class:!0});var $t=v(z);T=g($t,"BUTTON",{class:!0,type:!0});var ot=v(T);S(j.$$.fragment,ot),it=yt(ot,"Save"),ot.forEach(c),$t.forEach(c),p.forEach(c),N.forEach(c),m.forEach(c),this.h()},h(){d(l,"href","/tasks"),d(l,"class","flex items-center justify-center cursor-pointer text-white bg-primary px-3 py-3 rounded-full shadow-sm"),d(h,"class","text-secondary text-3xl font-bold ml-6"),d(s,"class","flex justify-start items-center my-12 pb-6 border-b-[1px] border-tertiary/30"),d(D,"class","col-span-1 md:col-span-12"),d(n,"class","col-span-1 md:col-span-12"),d(U,"class","col-span-1 md:col-span-12 mb-4"),d(C,"class","col-span-1 md:col-span-6"),d(R,"class","col-span-1 md:col-span-6"),d(T,"class","bg-primary hover:bg-secondary text-white font-bold py-2 px-4 rounded-lg flex items-center justify-center"),d(T,"type","submit"),d(z,"class","col-span-1 md:col-span-12 flex justify-center"),d(r,"class","grid grid-cols-1 md:grid-cols-12 gap-x-8"),d($,"class","w-full bg-white rounded-xl p-6 shadow-lg mb-6"),d(o,"class","container px-6 mx-auto md:max-w-5xl h-max")},m(t,m){Ot(t,o,m),i(o,s),i(s,l),O(a,l,null),i(s,w),i(s,h),i(h,u),i(o,y),i(o,$),i($,r),i(r,D),O(b,D,null),i(r,K),i(r,n),O(f,n,null),i(r,Z),i(r,U),O(E,U,null),i(r,et),i(r,C),O(k,C,null),i(r,nt),i(r,R),O(I,R,null),i(r,rt),i(r,z),i(z,T),O(j,T,null),i(T,it),X=!0,lt||(ut=At(r,"submit",Ft(e[10])),lt=!0)},p(t,[m]){const q={};!H&&m&2&&(H=!0,q.value=t[1].title,P(()=>H=!1)),b.$set(q);const L={};!Y&&m&2&&(Y=!0,L.value=t[1].description,P(()=>Y=!1)),f.$set(L);const G={};m&8&&(G.options=t[3]),!tt&&m&4&&(tt=!0,G.selected=t[2],P(()=>tt=!1)),E.$set(G);const N={};!st&&m&2&&(st=!0,N.value=t[1].start,P(()=>st=!1)),k.$set(N);const p={};!at&&m&2&&(at=!0,p.value=t[1].end,P(()=>at=!1)),I.$set(p)},i(t){X||(A(a.$$.fragment,t),A(b.$$.fragment,t),A(f.$$.fragment,t),A(E.$$.fragment,t),A(k.$$.fragment,t),A(I.$$.fragment,t),A(j.$$.fragment,t),X=!0)},o(t){F(a.$$.fragment,t),F(b.$$.fragment,t),F(f.$$.fragment,t),F(E.$$.fragment,t),F(k.$$.fragment,t),F(I.$$.fragment,t),F(j.$$.fragment,t),X=!1},d(t){t&&c(o),M(a),M(b),M(f),M(E),M(k),M(I),M(j),lt=!1,ut()}}}async function Qt({fetch:e,params:o}){Et.set(!0);let s=o.id,l=Vt(Ut),a={method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:`Bearer ${l.token}`}};const w=`${apiBackend}/api/tasks/${s}`,h=await e(w,a),y=(await h.json()).Task,$={start:y.start.split("T")[0],end:y.end.split("T")[0]},r=Object.assign(y,$);if(h.ok)return Et.set(!1),{props:{results:r}}}function Gt(e,o,s){let{results:l}=o,a={},w=[],h=[],u=[];Mt(async()=>{s(4,w=await Rt())});function y(){let n={};return n.label=l.team.title,n.value=l.team._id,n}function $(n){e.$$.not_equal(a.title,n)&&(a.title=n,s(1,a),s(2,u),s(0,l))}function r(n){e.$$.not_equal(a.description,n)&&(a.description=n,s(1,a),s(2,u),s(0,l))}function D(n){u=n,s(2,u)}function b(n){e.$$.not_equal(a.start,n)&&(a.start=n,s(1,a),s(2,u),s(0,l))}function H(n){e.$$.not_equal(a.end,n)&&(a.end=n,s(1,a),s(2,u),s(0,l))}const K=async()=>{await Ct(a,l._id)};return e.$$set=n=>{"results"in n&&s(0,l=n.results)},e.$$.update=()=>{e.$$.dirty&6&&s(1,a=Object.assign(a,{team:u[0]?u[0].value:""})),e.$$.dirty&1&&s(1,a=l),e.$$.dirty&16&&s(3,h=w.map(function(n){let f={};return f.label=n.title,f.value=n._id,f}))},s(2,u=[y()]),[l,a,u,h,w,$,r,D,b,H,K]}class Xt extends xt{constructor(o){super(),St(this,o,Gt,zt,Bt,{results:0})}}export{Xt as default,Qt as load};
