import{K as Ve,S as Ce,i as Se,s as Be,T as W,U as J,e as _,w as C,k as S,t as $e,c as g,a as v,x as B,d as c,m as O,h as we,b as d,g as Oe,M as l,y as R,I as Re,V as Ae,R as Fe,W as P,q as A,o as F,B as M,v as Me}from"../../../chunks/index-19f775f8.js";import{b as Ue}from"../../../chunks/hours-fb0dbe42.js";import{u as Ee}from"../../../chunks/tasks-dc514f39.js";import{u as He}from"../../../chunks/login-868b565c.js";import{I as ke}from"../../../chunks/inline-svg-44d6d57a.js";import{I as Q}from"../../../chunks/inputs-cc0c41a8.js";import"../../../chunks/index-3cd74ee4.js";function xe(e){let u,s,r,f,I,a,o,$,b,i,D,h,K,n,y,w,Y,Z,U,E,ee,te,H,k,se,ne,x,T,ae,re,z,j,q,ie,X,le,ue;f=new ke({props:{class:"text-primary w-fit h-[25px]",src:"/icons/arrow-left-solid.svg"}});function Te(t){e[5](t)}let pe={class:"mb-4",label:"Title",name:"title",type:"text",required:!0};e[1].title!==void 0&&(pe.value=e[1].title),h=new Q({props:pe}),W.push(()=>J(h,"value",Te));function Ie(t){e[6](t)}let de={class:"mb-4",textarea:!0,label:"Description",name:"description",rows:"6",required:!0};e[1].description!==void 0&&(de.value=e[1].description),w=new Q({props:de}),W.push(()=>J(w,"value",Ie));function De(t){e[7](t)}let ce={class:"mb-4",label:"Employee in charge",select:!0,multiselect:null,options:e[3]};e[2]!==void 0&&(ce.selected=e[2]),E=new Q({props:ce}),W.push(()=>J(E,"selected",De));function je(t){e[8](t)}let fe={class:"mb-4",label:"Start",name:"start",type:"date",required:!0};e[1].start!==void 0&&(fe.value=e[1].start),k=new Q({props:fe}),W.push(()=>J(k,"value",je));function qe(t){e[9](t)}let me={class:"mb-4",label:"End",name:"end",type:"date",required:!0};return e[1].end!==void 0&&(me.value=e[1].end),T=new Q({props:me}),W.push(()=>J(T,"value",qe)),q=new ke({props:{class:"text-white w-[15px] h-fit mr-3",src:"/icons/floppy-disk-solid.svg"}}),{c(){u=_("div"),s=_("div"),r=_("a"),C(f.$$.fragment),I=S(),a=_("h1"),o=$e("Edit Task"),$=S(),b=_("div"),i=_("form"),D=_("div"),C(h.$$.fragment),n=S(),y=_("div"),C(w.$$.fragment),Z=S(),U=_("div"),C(E.$$.fragment),te=S(),H=_("div"),C(k.$$.fragment),ne=S(),x=_("div"),C(T.$$.fragment),re=S(),z=_("div"),j=_("button"),C(q.$$.fragment),ie=$e("Save"),this.h()},l(t){u=g(t,"DIV",{class:!0});var m=v(u);s=g(m,"DIV",{class:!0});var V=v(s);r=g(V,"A",{href:!0,class:!0});var L=v(r);B(f.$$.fragment,L),L.forEach(c),I=O(V),a=g(V,"H1",{class:!0});var G=v(a);o=we(G,"Edit Task"),G.forEach(c),V.forEach(c),$=O(m),b=g(m,"DIV",{class:!0});var N=v(b);i=g(N,"FORM",{class:!0});var p=v(i);D=g(p,"DIV",{class:!0});var _e=v(D);B(h.$$.fragment,_e),_e.forEach(c),n=O(p),y=g(p,"DIV",{class:!0});var ge=v(y);B(w.$$.fragment,ge),ge.forEach(c),Z=O(p),U=g(p,"DIV",{class:!0});var ve=v(U);B(E.$$.fragment,ve),ve.forEach(c),te=O(p),H=g(p,"DIV",{class:!0});var he=v(H);B(k.$$.fragment,he),he.forEach(c),ne=O(p),x=g(p,"DIV",{class:!0});var be=v(x);B(T.$$.fragment,be),be.forEach(c),re=O(p),z=g(p,"DIV",{class:!0});var ye=v(z);j=g(ye,"BUTTON",{class:!0,type:!0});var oe=v(j);B(q.$$.fragment,oe),ie=we(oe,"Save"),oe.forEach(c),ye.forEach(c),p.forEach(c),N.forEach(c),m.forEach(c),this.h()},h(){d(r,"href","/tasksTeam"),d(r,"class","flex items-center justify-center cursor-pointer"),d(a,"class","text-secondary text-3xl font-bold ml-6"),d(s,"class","flex justify-start my-12 pb-6 border-b-[1px] border-tertiary/30"),d(D,"class","col-span-1 md:col-span-12"),d(y,"class","col-span-1 md:col-span-12"),d(U,"class","col-span-1 md:col-span-12 mb-4"),d(H,"class","col-span-1 md:col-span-6"),d(x,"class","col-span-1 md:col-span-6"),d(j,"class","bg-primary hover:bg-secondary text-white font-bold py-2 px-4 rounded-lg flex items-center justify-center"),d(j,"type","submit"),d(z,"class","col-span-1 md:col-span-12 flex justify-center"),d(i,"class","grid grid-cols-1 md:grid-cols-12 gap-x-8"),d(b,"class","w-full bg-white rounded-xl p-6"),d(u,"class","container md:max-w-5xl px-4 mx-auto shadow-sm")},m(t,m){Oe(t,u,m),l(u,s),l(s,r),R(f,r,null),l(s,I),l(s,a),l(a,o),l(u,$),l(u,b),l(b,i),l(i,D),R(h,D,null),l(i,n),l(i,y),R(w,y,null),l(i,Z),l(i,U),R(E,U,null),l(i,te),l(i,H),R(k,H,null),l(i,ne),l(i,x),R(T,x,null),l(i,re),l(i,z),l(z,j),R(q,j,null),l(j,ie),X=!0,le||(ue=Re(i,"submit",Ae(function(){Fe(Ee(e[1],e[0]._id))&&Ee(e[1],e[0]._id).apply(this,arguments)})),le=!0)},p(t,[m]){e=t;const V={};!K&&m&2&&(K=!0,V.value=e[1].title,P(()=>K=!1)),h.$set(V);const L={};!Y&&m&2&&(Y=!0,L.value=e[1].description,P(()=>Y=!1)),w.$set(L);const G={};m&8&&(G.options=e[3]),!ee&&m&4&&(ee=!0,G.selected=e[2],P(()=>ee=!1)),E.$set(G);const N={};!se&&m&2&&(se=!0,N.value=e[1].start,P(()=>se=!1)),k.$set(N);const p={};!ae&&m&2&&(ae=!0,p.value=e[1].end,P(()=>ae=!1)),T.$set(p)},i(t){X||(A(f.$$.fragment,t),A(h.$$.fragment,t),A(w.$$.fragment,t),A(E.$$.fragment,t),A(k.$$.fragment,t),A(T.$$.fragment,t),A(q.$$.fragment,t),X=!0)},o(t){F(f.$$.fragment,t),F(h.$$.fragment,t),F(w.$$.fragment,t),F(E.$$.fragment,t),F(k.$$.fragment,t),F(T.$$.fragment,t),F(q.$$.fragment,t),X=!1},d(t){t&&c(u),M(f),M(h),M(w),M(E),M(k),M(T),M(q),le=!1,ue()}}}async function Qe({fetch:e,params:u}){let s=u.id;console.log("params",s);let r=Ve(He),f={method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:`Bearer ${r.token}`}};const I=`${apiBackend}/api/tasks/${s}`,a=await e(I,f),$=(await a.json()).Task,b={start:$.start.split("T")[0],end:$.end.split("T")[0]},i=Object.assign($,b);if(a.ok)return{props:{results:i}}}function ze(e,u,s){let{results:r}=u,f=[],I=[],a={},o=[];Me(async()=>{let n;n=await Ue(),s(4,f=await n.employeesTeam)});function $(){let n={};return n.label=`${r.inCharge?r.inCharge.first_name:""} ${r.inCharge?r.inCharge.last_name:""}`,n.value=r.inCharge?r.inCharge._id:"",n}function b(n){e.$$.not_equal(a.title,n)&&(a.title=n,s(1,a),s(0,r),s(2,o))}function i(n){e.$$.not_equal(a.description,n)&&(a.description=n,s(1,a),s(0,r),s(2,o))}function D(n){o=n,s(2,o)}function h(n){e.$$.not_equal(a.start,n)&&(a.start=n,s(1,a),s(0,r),s(2,o))}function K(n){e.$$.not_equal(a.end,n)&&(a.end=n,s(1,a),s(0,r),s(2,o))}return e.$$set=n=>{"results"in n&&s(0,r=n.results)},e.$$.update=()=>{e.$$.dirty&1&&s(1,a=r),e.$$.dirty&6&&s(1,a=Object.assign(a,{inCharge:o[0]?o[0].value:null})),e.$$.dirty&16&&s(3,I=f.map(function(n){let y={};return y.label=`${n.first_name} ${n.last_name}`,y.value=n._id,y})),e.$$.dirty&4&&console.log("unwindEmployee",o),e.$$.dirty&2&&console.log("taskState",a),e.$$.dirty&1&&console.log("Results",r)},s(2,o=[$()]),[r,a,o,I,f,b,i,D,h,K]}class Xe extends Ce{constructor(u){super(),Se(this,u,ze,xe,Be,{results:0})}}export{Xe as default,Qe as load};
