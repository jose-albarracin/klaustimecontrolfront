import{K as qt,S as xt,i as St,s as Bt,T as W,U as J,l as _,w as q,a as x,r as wt,m as g,n as v,x as S,h as c,c as B,u as yt,p as d,b as Ot,O as l,y as O,I as At,V as Ft,W as P,f as A,t as F,B as U,o as Ut}from"../../../chunks/index-213b7a90.js";import{a as Ct,b as Et,u as Mt}from"../../../chunks/login-3638f510.js";import{I as Q}from"../../../chunks/inputs-13f203c9.js";import{I as It}from"../../../chunks/inline-svg-eb4ea3fd.js";import{u as Rt}from"../../../chunks/tasks-74bddac6.js";import{f as zt}from"../../../chunks/teams-d734c265.js";import"../../../chunks/index-01a17379.js";function Gt(e){let o,s,r,a,w,h,u,y,$,i,D,b,H,K,n,f,Y,Z,C,E,tt,et,M,I,st,nt,R,k,at,rt,z,T,j,it,X,lt,ut;a=new It({props:{class:"w-[20px] h-[20px]",src:"/icons/arrow-left-solid.svg"}});function kt(t){e[5](t)}let pt={class:"mb-4",label:"Title",name:"title",type:"text",required:!0};e[1].title!==void 0&&(pt.value=e[1].title),b=new Q({props:pt}),W.push(()=>J(b,"value",kt));function Dt(t){e[6](t)}let dt={class:"mb-4",label:"Description",name:"description",textarea:!0,rows:"6",required:!0};e[1].description!==void 0&&(dt.value=e[1].description),f=new Q({props:dt}),W.push(()=>J(f,"value",Dt));function Tt(t){e[7](t)}let ct={class:"mb-4",label:"Team",select:!0,multiselect:null,options:e[3]};e[2]!==void 0&&(ct.selected=e[2]),E=new Q({props:ct}),W.push(()=>J(E,"selected",Tt));function jt(t){e[8](t)}let ft={class:"mb-4",label:"Start",name:"start",type:"date",required:!0};e[1].start!==void 0&&(ft.value=e[1].start),I=new Q({props:ft}),W.push(()=>J(I,"value",jt));function Vt(t){e[9](t)}let mt={label:"End",name:"end",type:"date",required:!0};return e[1].end!==void 0&&(mt.value=e[1].end),k=new Q({props:mt}),W.push(()=>J(k,"value",Vt)),j=new It({props:{class:"text-white w-[15px] h-fit mr-3",src:"/icons/floppy-disk-solid.svg"}}),{c(){o=_("div"),s=_("div"),r=_("a"),q(a.$$.fragment),w=x(),h=_("h1"),u=wt("Edit task"),y=x(),$=_("div"),i=_("form"),D=_("div"),q(b.$$.fragment),K=x(),n=_("div"),q(f.$$.fragment),Z=x(),C=_("div"),q(E.$$.fragment),et=x(),M=_("div"),q(I.$$.fragment),nt=x(),R=_("div"),q(k.$$.fragment),rt=x(),z=_("div"),T=_("button"),q(j.$$.fragment),it=wt("Save"),this.h()},l(t){o=g(t,"DIV",{class:!0});var m=v(o);s=g(m,"DIV",{class:!0});var V=v(s);r=g(V,"A",{href:!0,class:!0});var L=v(r);S(a.$$.fragment,L),L.forEach(c),w=B(V),h=g(V,"H1",{class:!0});var G=v(h);u=yt(G,"Edit task"),G.forEach(c),V.forEach(c),y=B(m),$=g(m,"DIV",{class:!0});var N=v($);i=g(N,"FORM",{class:!0});var p=v(i);D=g(p,"DIV",{class:!0});var _t=v(D);S(b.$$.fragment,_t),_t.forEach(c),K=B(p),n=g(p,"DIV",{class:!0});var gt=v(n);S(f.$$.fragment,gt),gt.forEach(c),Z=B(p),C=g(p,"DIV",{class:!0});var vt=v(C);S(E.$$.fragment,vt),vt.forEach(c),et=B(p),M=g(p,"DIV",{class:!0});var ht=v(M);S(I.$$.fragment,ht),ht.forEach(c),nt=B(p),R=g(p,"DIV",{class:!0});var bt=v(R);S(k.$$.fragment,bt),bt.forEach(c),rt=B(p),z=g(p,"DIV",{class:!0});var $t=v(z);T=g($t,"BUTTON",{class:!0,type:!0});var ot=v(T);S(j.$$.fragment,ot),it=yt(ot,"Save"),ot.forEach(c),$t.forEach(c),p.forEach(c),N.forEach(c),m.forEach(c),this.h()},h(){d(r,"href","/tasks"),d(r,"class","flex items-center justify-center cursor-pointer text-white bg-primary px-3 py-3 rounded-full shadow-sm"),d(h,"class","text-secondary text-3xl font-bold ml-6"),d(s,"class","flex justify-start items-center my-12 pb-6 border-b-[1px] border-tertiary/30"),d(D,"class","col-span-1 md:col-span-12"),d(n,"class","col-span-1 md:col-span-12"),d(C,"class","col-span-1 md:col-span-12 mb-4"),d(M,"class","col-span-1 md:col-span-6"),d(R,"class","col-span-1 md:col-span-6"),d(T,"class","bg-primary hover:bg-secondary text-white font-bold py-2 px-4 rounded-lg flex items-center justify-center"),d(T,"type","submit"),d(z,"class","col-span-1 md:col-span-12 flex justify-center"),d(i,"class","grid grid-cols-1 md:grid-cols-12 gap-x-8"),d($,"class","w-full bg-white rounded-xl p-6 shadow-lg mb-6"),d(o,"class","container px-6 mx-auto md:max-w-5xl h-max")},m(t,m){Ot(t,o,m),l(o,s),l(s,r),O(a,r,null),l(s,w),l(s,h),l(h,u),l(o,y),l(o,$),l($,i),l(i,D),O(b,D,null),l(i,K),l(i,n),O(f,n,null),l(i,Z),l(i,C),O(E,C,null),l(i,et),l(i,M),O(I,M,null),l(i,nt),l(i,R),O(k,R,null),l(i,rt),l(i,z),l(z,T),O(j,T,null),l(T,it),X=!0,lt||(ut=At(i,"submit",Ft(e[10])),lt=!0)},p(t,[m]){const V={};!H&&m&2&&(H=!0,V.value=t[1].title,P(()=>H=!1)),b.$set(V);const L={};!Y&&m&2&&(Y=!0,L.value=t[1].description,P(()=>Y=!1)),f.$set(L);const G={};m&8&&(G.options=t[3]),!tt&&m&4&&(tt=!0,G.selected=t[2],P(()=>tt=!1)),E.$set(G);const N={};!st&&m&2&&(st=!0,N.value=t[1].start,P(()=>st=!1)),I.$set(N);const p={};!at&&m&2&&(at=!0,p.value=t[1].end,P(()=>at=!1)),k.$set(p)},i(t){X||(A(a.$$.fragment,t),A(b.$$.fragment,t),A(f.$$.fragment,t),A(E.$$.fragment,t),A(I.$$.fragment,t),A(k.$$.fragment,t),A(j.$$.fragment,t),X=!0)},o(t){F(a.$$.fragment,t),F(b.$$.fragment,t),F(f.$$.fragment,t),F(E.$$.fragment,t),F(I.$$.fragment,t),F(k.$$.fragment,t),F(j.$$.fragment,t),X=!1},d(t){t&&c(o),U(a),U(b),U(f),U(E),U(I),U(k),U(j),lt=!1,ut()}}}async function Xt({fetch:e,params:o}){Et.set(!0);let s=o.id,r=qt(Mt),a={method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:`Bearer ${r.token}`}};const w=`${Ct}/api/tasks/${s}`,h=await e(w,a),y=(await h.json()).Task,$={start:y.start.split("T")[0],end:y.end.split("T")[0]},i=Object.assign(y,$);if(h.ok)return Et.set(!1),{props:{results:i}}}function Ht(e,o,s){let{results:r}=o,a={},w=[],h=[],u=[];Ut(async()=>{s(4,w=await zt())});function y(){let n={};return n.label=r.team?r.team.title:"",n.value=r.team?r.team._id:"",n}function $(n){e.$$.not_equal(a.title,n)&&(a.title=n,s(1,a),s(2,u),s(0,r))}function i(n){e.$$.not_equal(a.description,n)&&(a.description=n,s(1,a),s(2,u),s(0,r))}function D(n){u=n,s(2,u)}function b(n){e.$$.not_equal(a.start,n)&&(a.start=n,s(1,a),s(2,u),s(0,r))}function H(n){e.$$.not_equal(a.end,n)&&(a.end=n,s(1,a),s(2,u),s(0,r))}const K=async()=>{await Rt(a,r._id)};return e.$$set=n=>{"results"in n&&s(0,r=n.results)},e.$$.update=()=>{e.$$.dirty&6&&s(1,a=Object.assign(a,{team:u[0]?u[0].value:null})),e.$$.dirty&1&&s(1,a=r),e.$$.dirty&16&&s(3,h=w.map(function(n){let f={};return f.label=n.title,f.value=n._id,f}))},s(2,u=[y()]),[r,a,u,h,w,$,i,D,b,H,K]}class Yt extends xt{constructor(o){super(),St(this,o,Ht,Gt,Bt,{results:0})}}export{Yt as default,Xt as load};
