import{K as Ce,S as Se,i as Be,s as Oe,T as W,U as J,l as _,w as C,a as S,r as ye,m as g,n as v,x as B,h as c,c as O,u as we,p as d,b as Ae,O as l,y as A,I as Fe,W as P,f as F,t as R,B as U,o as Re,V as Ue,R as He}from"../../../chunks/index-213b7a90.js";import{a as Me,b as Ee,u as xe}from"../../../chunks/login-3638f510.js";import{b as ze}from"../../../chunks/hours-62e4a776.js";import{u as Te}from"../../../chunks/tasks-74bddac6.js";import{I as ke}from"../../../chunks/inline-svg-eb4ea3fd.js";import{I as Q}from"../../../chunks/inputs-13f203c9.js";import"../../../chunks/index-01a17379.js";function Ge(e){let o,s,r,f,I,a,u,y,b,i,D,h,K,n,$,w,Y,Z,H,E,ee,te,M,T,se,ne,x,k,ae,re,z,j,V,ie,X,le,ue;f=new ke({props:{class:"text-primary w-fit h-[25px]",src:"/icons/arrow-left-solid.svg"}});function Ie(t){e[5](t)}let pe={class:"mb-4",label:"Title",name:"title",type:"text",required:!0};e[1].title!==void 0&&(pe.value=e[1].title),h=new Q({props:pe}),W.push(()=>J(h,"value",Ie));function De(t){e[6](t)}let de={class:"mb-4",textarea:!0,label:"Description",name:"description",rows:"6",required:!0};e[1].description!==void 0&&(de.value=e[1].description),w=new Q({props:de}),W.push(()=>J(w,"value",De));function je(t){e[7](t)}let ce={class:"mb-4",label:"Employee in charge",select:!0,multiselect:null,options:e[3]};e[2]!==void 0&&(ce.selected=e[2]),E=new Q({props:ce}),W.push(()=>J(E,"selected",je));function Ve(t){e[8](t)}let fe={class:"mb-4",label:"Start",name:"start",type:"date",required:!0};e[1].start!==void 0&&(fe.value=e[1].start),T=new Q({props:fe}),W.push(()=>J(T,"value",Ve));function qe(t){e[9](t)}let me={class:"mb-4",label:"End",name:"end",type:"date",required:!0};return e[1].end!==void 0&&(me.value=e[1].end),k=new Q({props:me}),W.push(()=>J(k,"value",qe)),V=new ke({props:{class:"text-white w-[15px] h-fit mr-3",src:"/icons/floppy-disk-solid.svg"}}),{c(){o=_("div"),s=_("div"),r=_("a"),C(f.$$.fragment),I=S(),a=_("h1"),u=ye("Edit Task"),y=S(),b=_("div"),i=_("form"),D=_("div"),C(h.$$.fragment),n=S(),$=_("div"),C(w.$$.fragment),Z=S(),H=_("div"),C(E.$$.fragment),te=S(),M=_("div"),C(T.$$.fragment),ne=S(),x=_("div"),C(k.$$.fragment),re=S(),z=_("div"),j=_("button"),C(V.$$.fragment),ie=ye("Save"),this.h()},l(t){o=g(t,"DIV",{class:!0});var m=v(o);s=g(m,"DIV",{class:!0});var q=v(s);r=g(q,"A",{href:!0,class:!0});var L=v(r);B(f.$$.fragment,L),L.forEach(c),I=O(q),a=g(q,"H1",{class:!0});var G=v(a);u=we(G,"Edit Task"),G.forEach(c),q.forEach(c),y=O(m),b=g(m,"DIV",{class:!0});var N=v(b);i=g(N,"FORM",{class:!0});var p=v(i);D=g(p,"DIV",{class:!0});var _e=v(D);B(h.$$.fragment,_e),_e.forEach(c),n=O(p),$=g(p,"DIV",{class:!0});var ge=v($);B(w.$$.fragment,ge),ge.forEach(c),Z=O(p),H=g(p,"DIV",{class:!0});var ve=v(H);B(E.$$.fragment,ve),ve.forEach(c),te=O(p),M=g(p,"DIV",{class:!0});var he=v(M);B(T.$$.fragment,he),he.forEach(c),ne=O(p),x=g(p,"DIV",{class:!0});var be=v(x);B(k.$$.fragment,be),be.forEach(c),re=O(p),z=g(p,"DIV",{class:!0});var $e=v(z);j=g($e,"BUTTON",{class:!0,type:!0});var oe=v(j);B(V.$$.fragment,oe),ie=we(oe,"Save"),oe.forEach(c),$e.forEach(c),p.forEach(c),N.forEach(c),m.forEach(c),this.h()},h(){d(r,"href","/tasksTeam"),d(r,"class","flex items-center justify-center cursor-pointer"),d(a,"class","text-secondary text-3xl font-bold ml-6"),d(s,"class","flex justify-start my-12 pb-6 border-b-[1px] border-tertiary/30"),d(D,"class","col-span-1 md:col-span-12"),d($,"class","col-span-1 md:col-span-12"),d(H,"class","col-span-1 md:col-span-12 mb-4"),d(M,"class","col-span-1 md:col-span-6"),d(x,"class","col-span-1 md:col-span-6"),d(j,"class","bg-primary hover:bg-secondary text-white font-bold py-2 px-4 rounded-lg flex items-center justify-center"),d(j,"type","submit"),d(z,"class","col-span-1 md:col-span-12 flex justify-center"),d(i,"class","grid grid-cols-1 md:grid-cols-12 gap-x-8"),d(b,"class","w-full bg-white rounded-xl p-6"),d(o,"class","container md:max-w-5xl px-4 mx-auto shadow-sm")},m(t,m){Ae(t,o,m),l(o,s),l(s,r),A(f,r,null),l(s,I),l(s,a),l(a,u),l(o,y),l(o,b),l(b,i),l(i,D),A(h,D,null),l(i,n),l(i,$),A(w,$,null),l(i,Z),l(i,H),A(E,H,null),l(i,te),l(i,M),A(T,M,null),l(i,ne),l(i,x),A(k,x,null),l(i,re),l(i,z),l(z,j),A(V,j,null),l(j,ie),X=!0,le||(ue=Fe(i,"submit",Ue(function(){He(Te(e[1],e[0]._id))&&Te(e[1],e[0]._id).apply(this,arguments)})),le=!0)},p(t,[m]){e=t;const q={};!K&&m&2&&(K=!0,q.value=e[1].title,P(()=>K=!1)),h.$set(q);const L={};!Y&&m&2&&(Y=!0,L.value=e[1].description,P(()=>Y=!1)),w.$set(L);const G={};m&8&&(G.options=e[3]),!ee&&m&4&&(ee=!0,G.selected=e[2],P(()=>ee=!1)),E.$set(G);const N={};!se&&m&2&&(se=!0,N.value=e[1].start,P(()=>se=!1)),T.$set(N);const p={};!ae&&m&2&&(ae=!0,p.value=e[1].end,P(()=>ae=!1)),k.$set(p)},i(t){X||(F(f.$$.fragment,t),F(h.$$.fragment,t),F(w.$$.fragment,t),F(E.$$.fragment,t),F(T.$$.fragment,t),F(k.$$.fragment,t),F(V.$$.fragment,t),X=!0)},o(t){R(f.$$.fragment,t),R(h.$$.fragment,t),R(w.$$.fragment,t),R(E.$$.fragment,t),R(T.$$.fragment,t),R(k.$$.fragment,t),R(V.$$.fragment,t),X=!1},d(t){t&&c(o),U(f),U(h),U(w),U(E),U(T),U(k),U(V),le=!1,ue()}}}async function Ye({fetch:e,params:o}){let s=o.id;console.log("params",s),Ee.set(!0);let r=Ce(xe),f={method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:`Bearer ${r.token}`}};const I=`${Me}/api/tasks/${s}`,a=await e(I,f),y=(await a.json()).Task,b={start:y.start.split("T")[0],end:y.end.split("T")[0]},i=Object.assign(y,b);if(a.ok)return Ee.set(!1),{props:{results:i}}}function Ke(e,o,s){let{results:r}=o,f=[],I=[],a={},u=[];Re(async()=>{let n;n=await ze(),s(4,f=await n.employeesTeam)});function y(){let n={};return n.label=`${r.inCharge?r.inCharge.first_name:""} ${r.inCharge?r.inCharge.last_name:""}`,n.value=r.inCharge?r.inCharge._id:"",n}function b(n){e.$$.not_equal(a.title,n)&&(a.title=n,s(1,a),s(0,r),s(2,u))}function i(n){e.$$.not_equal(a.description,n)&&(a.description=n,s(1,a),s(0,r),s(2,u))}function D(n){u=n,s(2,u)}function h(n){e.$$.not_equal(a.start,n)&&(a.start=n,s(1,a),s(0,r),s(2,u))}function K(n){e.$$.not_equal(a.end,n)&&(a.end=n,s(1,a),s(0,r),s(2,u))}return e.$$set=n=>{"results"in n&&s(0,r=n.results)},e.$$.update=()=>{e.$$.dirty&1&&s(1,a=r),e.$$.dirty&6&&s(1,a=Object.assign(a,{inCharge:u[0]?u[0].value:null})),e.$$.dirty&16&&s(3,I=f.map(function(n){let $={};return $.label=`${n.first_name} ${n.last_name}`,$.value=n._id,$}))},s(2,u=[y()]),[r,a,u,I,f,b,i,D,h,K]}class Ze extends Se{constructor(o){super(),Be(this,o,Ke,Ge,Oe,{results:0})}}export{Ze as default,Ye as load};
