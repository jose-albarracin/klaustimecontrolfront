import{I as y,a1 as T,S as q,i as C,s as D,C as _,N as G,O as I,a as P,d as b,a2 as E,H as O,g as V,a3 as X,z as x,E as S,X as z,a4 as k,a5 as A,a6 as B,v as F,D as N,a7 as R}from"./index-19f775f8.js";const J=["focus","blur","fullscreenchange","fullscreenerror","scroll","cut","copy","paste","keydown","keypress","keyup","auxclick","click","contextmenu","dblclick","mousedown","mouseenter","mouseleave","mousemove","mouseover","mouseout","mouseup","pointerlockchange","pointerlockerror","select","wheel","drag","dragend","dragenter","dragstart","dragleave","dragover","drop","touchcancel","touchend","touchmove","touchstart","pointerover","pointerenter","pointerdown","pointermove","pointerup","pointercancel","pointerout","pointerleave","gotpointercapture","lostpointercapture"];function K(n,e=[]){const s=[...J,...e];function u(l){T(n,l)}return l=>{const a=[];for(let t=0;t<s.length;t++)a.push(y(l,s[t],u));return{destroy:()=>{for(let t=0;t<a.length;t++)a[t]()}}}}function Q(n){let e,s,u,l=[{xmlns:"http://www.w3.org/2000/svg"},n[0],n[3],{contenteditable:"true"}],a={};for(let t=0;t<l.length;t+=1)a=_(a,l[t]);return{c(){e=G("svg"),this.h()},l(t){e=I(t,"svg",{xmlns:!0,contenteditable:!0}),P(e).forEach(b),this.h()},h(){E(e,a),n[1]===void 0&&O(()=>n[6].call(e))},m(t,i){V(t,e,i),n[1]!==void 0&&(e.innerHTML=n[1]),s||(u=[X(n[2].call(null,e)),y(e,"input",n[6])],s=!0)},p(t,[i]){E(e,a=x(l,[{xmlns:"http://www.w3.org/2000/svg"},i&1&&t[0],i&8&&t[3],{contenteditable:"true"}])),i&2&&t[1]!==e.innerHTML&&(e.innerHTML=t[1])},i:S,o:S,d(t){t&&b(e),s=!1,z(u)}}}function U(n,e,s){const u=["src","transformSrc"];let l=k(e,u);const a=A(),t=K(B());let{src:i}=e,{transformSrc:p=r=>r}=e;F(()=>{M(i)});let f={},h=!1,v={},g;function L(r){return new Promise((d,c)=>{const o=new XMLHttpRequest;o.open("GET",r,!0),o.onload=()=>{if(o.status>=200&&o.status<400)try{let m=new DOMParser().parseFromString(o.responseText,"text/xml").querySelector("svg");m?(m=p(m),d(m)):c(new Error('Loaded file is not valid SVG"'))}catch(w){c(w)}else c(new Error("Error loading SVG"))},o.onerror=c,o.send()})}function M(r){f[r]||(h&&(h=!1,a("unloaded")),f[r]=L(r)),f[r].then(async d=>{const c=d.attributes;for(let o=c.length-1;o>=0;o--)s(0,v[c[o].name]=c[o].value,v);s(1,g=d.innerHTML),await N(),h=!0,a("loaded")}).catch(d=>{delete f[r],console.error(d)})}function H(){g=this.innerHTML,s(1,g)}return n.$$set=r=>{e=_(_({},e),R(r)),s(3,l=k(e,u)),"src"in r&&s(4,i=r.src),"transformSrc"in r&&s(5,p=r.transformSrc)},[v,g,t,l,i,p,H]}class Z extends q{constructor(e){super(),C(this,e,U,Q,D,{src:4,transformSrc:5})}}export{Z as I};
